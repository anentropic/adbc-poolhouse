---
phase: 08-review-and-improve-docs
plan: "03"
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/src/changelog.md
autonomous: true
requirements: []

must_haves:
  truths:
    - "docs/src/changelog.md contains grouped commit entries generated by git-cliff"
    - "changelog.md is not just the stub comment pointing to GitHub Releases"
    - "uv run mkdocs build --strict passes with the updated changelog.md"
  artifacts:
    - path: "docs/src/changelog.md"
      provides: "Git-cliff generated changelog from all commits to date"
      contains: "Changelog"
  key_links: []
---

<objective>
Generate docs/src/changelog.md from the full commit history using git-cliff.

Purpose: The current changelog.md is a stub that redirects users to GitHub Releases.
Populating it with actual content means users can read the changelog without leaving
the docs site.

Output: docs/src/changelog.md populated with git-cliff generated content grouped
by commit type (Features, Bug Fixes, Documentation, etc.).
</objective>

<execution_context>
@/Users/paul/.claude/get-shit-done/workflows/execute-plan.md
@/Users/paul/.claude/get-shit-done/templates/summary.md
@.claude/skills/adbc-poolhouse-docs-author/SKILL.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.cliff.toml
@docs/src/changelog.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Generate changelog with git-cliff and write to docs/src/changelog.md</name>
  <files>docs/src/changelog.md</files>
  <action>
The repo has no tags yet (confirmed in research). Use `--unreleased` flag which
covers all commits when no tags exist.

**Step 1 — Install git-cliff if not available.**

Check if git-cliff is installed:
```bash
git-cliff --version
```

If not installed, install via brew (macOS):
```bash
brew install git-cliff
```

If brew is unavailable, download the v2.7.0 binary matching the release.yml CI
workflow (v2.7.0, aarch64-apple-darwin for M-series Mac):
```bash
curl -L https://github.com/orhun/git-cliff/releases/download/v2.7.0/git-cliff-2.7.0-aarch64-apple-darwin.tar.gz | tar xz
./git-cliff --version
```

**Step 2 — Generate the changelog.**

Run from the repo root (git-cliff auto-discovers .cliff.toml):
```bash
git-cliff --unreleased --output docs/src/changelog.md
```

The .cliff.toml config:
- `filter_unconventional = true` — only conventional commits are included
- Groups by: Features, Bug Fixes, Documentation, Performance, Refactoring, Testing, Miscellaneous
- `sort_commits = "oldest"` — chronological order within each group

**Step 3 — Inspect the output.**

Read the generated docs/src/changelog.md to verify it has content. If it is empty
or near-empty, inspect with `git log --oneline | head -20` to confirm commit message
format, then re-run git-cliff without `--unreleased` as a fallback:
```bash
git-cliff --output docs/src/changelog.md
```

**Step 4 — Verify mkdocs build.**

```bash
uv run mkdocs build --strict
```

If the build fails because changelog.md has a header that conflicts with mkdocs
nav (the .cliff.toml [changelog] header is `# Changelog\n\n...`), edit
docs/src/changelog.md to remove the duplicate H1 heading if mkdocs adds its own
from the nav label.

Do NOT hand-write the changelog content. This task is purely about running
git-cliff and committing the result.
  </action>
  <verify>
    <automated>cd /Users/paul/Documents/Dev/Personal/adbc-poolhouse && wc -l docs/src/changelog.md && echo "line count above should be > 10"</automated>
  </verify>
  <done>docs/src/changelog.md contains generated content (not just the stub comment); uv run mkdocs build --strict passes</done>
</task>

</tasks>

<verification>
```bash
cd /Users/paul/Documents/Dev/Personal/adbc-poolhouse && \
  wc -l docs/src/changelog.md && \
  grep -c "Features\|Bug Fixes\|Documentation\|Changelog" docs/src/changelog.md && \
  echo "both counts should be > 0"
```
</verification>

<success_criteria>
- docs/src/changelog.md has >10 lines of generated content
- File contains at least one commit group heading (Features, Bug Fixes, Documentation, etc.)
- uv run mkdocs build --strict exits 0
</success_criteria>

<output>
After completion, create `.planning/phases/08-review-and-improve-docs/08-03-SUMMARY.md`
</output>
